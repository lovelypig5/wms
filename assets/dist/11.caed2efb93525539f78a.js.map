{"version":3,"sources":["webpack:///11.caed2efb93525539f78a.js","webpack:///./js/features/goods/detail.vue","webpack:///detail.vue","webpack:///./js/features/goods/detail.vue?3837"],"names":["webpackJsonp",91,"module","exports","__webpack_require__","__vue_script__","__vue_template__","__esModule","options","template",92,"Vue","$","_interopRequireDefault","obj","default","Object","defineProperty","value","_stringify","_stringify2","_api","_api2","_actions","_actions2","GoodDetail","extend","name","data","attrlist","good","list","loading","fetch","add","ready","this","fetchAttrList","$el","on","addAttr","popover","content","html","methods","self","attr","find","val","trim","ajax","url","type","goods_id","id","success","resp","alert","show","msg","push","error","responseText","always","reset","goodsDetail","$route","params","callback","goodsAttrs","good_id","rows","vuex","actions","call",93],"mappings":"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","file":"11.caed2efb93525539f78a.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 91:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__vue_script__ = __webpack_require__(92)\n\t__vue_template__ = __webpack_require__(93)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n\n/***/ 92:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Vue, $) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _stringify = __webpack_require__(72);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _api = __webpack_require__(55);\n\t\n\tvar _api2 = _interopRequireDefault(_api);\n\t\n\tvar _actions = __webpack_require__(52);\n\t\n\tvar _actions2 = _interopRequireDefault(_actions);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// <template>\n\t//     <div class=\"panel panel-primary good-detail\">\n\t//         <div class=\"panel-heading\">{{good.name}}</div>\n\t//         <div class=\"attList\">\n\t//             <table class=\"table\">\n\t//                 <thead>\n\t//                     <tr>\n\t//                         <th>属性列表<span class=\"add-attr\" data-container=\".good-detail\" data-toggle=\"popover\" data-placement=\"bottom\">+</span></th>\n\t//                     </tr>\n\t//                 </thead>\n\t//                 <tbody>\n\t//                     <tr>\n\t//                         <td>\n\t//                             <span v-for=\"attr in attrlist\" class=\"attr\">{{attr.attr}}</span>\n\t//                         </td>\n\t//                     </tr>\n\t//                 </tbody>\n\t//             </table>\n\t//         </div>\n\t//         <table class=\"table\" v-if=\"!loading.fetch\">\n\t//             <thead>\n\t//                 <tr>\n\t//                     <th>库存列表</th>\n\t//                     <th>库存数量</th>\n\t//                     <th>操作</th>\n\t//                     <th>趋势</th>\n\t//                 </tr>\n\t//             </thead>\n\t//             <tbody>\n\t//                 <tr class=\"item\">\n\t//                     <td>所有</td>\n\t//                     <td>{{good.total}}</td>\n\t//                     <td>\n\t//                     </td>\n\t//                     <td>\n\t//                         <a href=\"javascript:void(0)\" v-link=\"{path: '/goods/analysis'}\">趋势</a>\n\t//                     </td>\n\t//                 </tr>\n\t//                 <tr class=\"item\" v-for=\"g in good.list\">\n\t//                     <td>{{g.attr | remove-whitespace}}</td>\n\t//                     <td>{{g.count}}</td>\n\t//                     <td>\n\t//                         <a href=\"javascript:void(0)\" v-link=\"{path: '/goods/in', query: {id: good.id, name: good.name, attr: g.attr} }\">入库</a>\n\t//                         <a href=\"javascript:void(0)\" v-link=\"{path: '/goods/out', query: {id: good.id, name: good.name, attr: g.attr} }\">出库</a>\n\t//                     </td>\n\t//                     <td>\n\t//                         <a href=\"javascript:void(0)\" v-link=\"{path: '/goods/analysis'}\">趋势</a>\n\t//                     </td>\n\t//                 </tr>\n\t//             </tbody>\n\t//         </table>\n\t//         <div v-if=\"loading.fetch\">\n\t//             <div class=\"loading audio-wave\"></div>\n\t//         </div>\n\t// </template>\n\t// <script>\n\t\n\t\n\tvar GoodDetail = Vue.extend({\n\t    name: 'goodList',\n\t    data: function data() {\n\t        return {\n\t            attrlist: [],\n\t            good: {\n\t                name: \"\",\n\t                list: []\n\t            },\n\t            loading: {\n\t                fetch: false,\n\t                add: false\n\t            }\n\t        };\n\t    },\n\t    ready: function ready() {\n\t        this.fetch(true);\n\t        this.fetchAttrList();\n\t\n\t        $(this.$el).on('click', '.save', this.addAttr);\n\t        $('.add-attr').popover({\n\t            content: function content() {\n\t                return '<input type=\"text\" placeholder=\"请输入属性名称\" class=\"attrName\"/><button class=\"btn-primary save\">保存</button>';\n\t            },\n\t\n\t            html: true\n\t        });\n\t    },\n\t\n\t    methods: {\n\t        addAttr: function addAttr() {\n\t            var self = this;\n\t            var attr = $(this.$el).find('.attrName').val();\n\t            if (!attr || !attr.trim()) {\n\t                return;\n\t            }\n\t\n\t            if (self.loading.add) {\n\t                return;\n\t            }\n\t\n\t            self.loading.add = !self.loading.add;\n\t            $.ajax({\n\t                url: _api2.default.addAttr,\n\t                type: 'post',\n\t                data: (0, _stringify2.default)({\n\t                    attr: attr,\n\t                    goods_id: this.good.id\n\t                }),\n\t                success: function success(resp) {\n\t                    self.alert({\n\t                        show: true,\n\t                        msg: '添加成功',\n\t                        type: 'success'\n\t                    });\n\t                    self.attrlist.push({\n\t                        attr: attr\n\t                    });\n\t                    $(self.$el).find('.attrName').val('');\n\t                    $('.add-attr').popover('hide');\n\t                },\n\t                error: function error(resp) {\n\t                    self.alert({\n\t                        show: true,\n\t                        msg: resp.responseText || '添加商品属性失败',\n\t                        type: 'error'\n\t                    });\n\t                }\n\t            }).always(function () {\n\t                self.loading.add = !self.loading.add;\n\t            });\n\t        },\n\t        fetch: function fetch(reset) {\n\t            var self = this;\n\t\n\t            if (self.loading.fetch) {\n\t                return;\n\t            }\n\t            self.loading.fetch = !self.loading.fetch;\n\t\n\t            $.ajax({\n\t                url: _api2.default.goodsDetail,\n\t                data: {\n\t                    id: this.$route.params.id\n\t                },\n\t                success: function success(resp) {\n\t                    self.good = resp;\n\t                },\n\t                error: function error(resp) {\n\t                    self.alert({\n\t                        show: true,\n\t                        msg: '获取商品详情失败',\n\t                        type: 'error'\n\t                    });\n\t                }\n\t            }).always(function () {\n\t                self.loading.fetch = !self.loading.fetch;\n\t            });\n\t        },\n\t        fetchAttrList: function fetchAttrList(callback) {\n\t            var self = this;\n\t            $.ajax({\n\t                url: _api2.default.goodsAttrs,\n\t                data: {\n\t                    good_id: this.$route.params.id\n\t                },\n\t                success: function success(rows) {\n\t                    self.attrlist = rows;\n\t\n\t                    if (callback && typeof callback == 'function') {\n\t                        callback();\n\t                    }\n\t                },\n\t                error: function error() {\n\t                    self.attrlist = [];\n\t                }\n\t            });\n\t        }\n\t    },\n\t    vuex: {\n\t        actions: {\n\t            alert: _actions2.default.alert\n\t        }\n\t    }\n\t});\n\texports.default = GoodDetail;\n\t// </script>\n\t/* generated by vue-loader */\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9), __webpack_require__(8)))\n\n/***/ },\n\n/***/ 93:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"panel panel-primary good-detail\\\"> <div class=panel-heading>{{good.name}}</div> <div class=attList> <table class=table> <thead> <tr> <th>属性列表<span class=add-attr data-container=.good-detail data-toggle=popover data-placement=bottom>+</span></th> </tr> </thead> <tbody> <tr> <td> <span v-for=\\\"attr in attrlist\\\" class=attr>{{attr.attr}}</span> </td> </tr> </tbody> </table> </div> <table class=table v-if=!loading.fetch> <thead> <tr> <th>库存列表</th> <th>库存数量</th> <th>操作</th> <th>趋势</th> </tr> </thead> <tbody> <tr class=item> <td>所有</td> <td>{{good.total}}</td> <td> </td> <td> <a href=javascript:void(0) v-link=\\\"{path: '/goods/analysis'}\\\">趋势</a> </td> </tr> <tr class=item v-for=\\\"g in good.list\\\"> <td>{{g.attr | remove-whitespace}}</td> <td>{{g.count}}</td> <td> <a href=javascript:void(0) v-link=\\\"{path: '/goods/in', query: {id: good.id, name: good.name, attr: g.attr} }\\\">入库</a> <a href=javascript:void(0) v-link=\\\"{path: '/goods/out', query: {id: good.id, name: good.name, attr: g.attr} }\\\">出库</a> </td> <td> <a href=javascript:void(0) v-link=\\\"{path: '/goods/analysis'}\\\">趋势</a> </td> </tr> </tbody> </table> <div v-if=loading.fetch> <div class=\\\"loading audio-wave\\\"></div> </div> </div>\";\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 11.caed2efb93525539f78a.js\n **/","var __vue_script__, __vue_template__\n__vue_script__ = require(\"!!babel?{\\\"presets\\\":[\\\"/Users/ding/Documents/out2man/kil/node_modules/babel-preset-es2015/index.js\\\"],\\\"plugins\\\":[[\\\"/Users/ding/Documents/out2man/kil/node_modules/babel-plugin-transform-runtime/lib/index.js\\\"]],\\\"cacheDirectory\\\":true}!./../../../../../kil/node_modules/vue-loader/lib/selector.js?type=script&index=0!./detail.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../../../../kil/node_modules/vue-loader/lib/selector.js?type=template&index=0!./detail.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/features/goods/detail.vue\n ** module id = 91\n ** module chunks = 11\n **/","<template>\n    <div class=\"panel panel-primary good-detail\">\n        <div class=\"panel-heading\">{{good.name}}</div>\n        <div class=\"attList\">\n            <table class=\"table\">\n                <thead>\n                    <tr>\n                        <th>属性列表<span class=\"add-attr\" data-container=\".good-detail\" data-toggle=\"popover\" data-placement=\"bottom\">+</span></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>\n                            <span v-for=\"attr in attrlist\" class=\"attr\">{{attr.attr}}</span>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        <table class=\"table\" v-if=\"!loading.fetch\">\n            <thead>\n                <tr>\n                    <th>库存列表</th>\n                    <th>库存数量</th>\n                    <th>操作</th>\n                    <th>趋势</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr class=\"item\">\n                    <td>所有</td>\n                    <td>{{good.total}}</td>\n                    <td>\n                    </td>\n                    <td>\n                        <a href=\"javascript:void(0)\" v-link=\"{path: '/goods/analysis'}\">趋势</a>\n                    </td>\n                </tr>\n                <tr class=\"item\" v-for=\"g in good.list\">\n                    <td>{{g.attr | remove-whitespace}}</td>\n                    <td>{{g.count}}</td>\n                    <td>\n                        <a href=\"javascript:void(0)\" v-link=\"{path: '/goods/in', query: {id: good.id, name: good.name, attr: g.attr} }\">入库</a>\n                        <a href=\"javascript:void(0)\" v-link=\"{path: '/goods/out', query: {id: good.id, name: good.name, attr: g.attr} }\">出库</a>\n                    </td>\n                    <td>\n                        <a href=\"javascript:void(0)\" v-link=\"{path: '/goods/analysis'}\">趋势</a>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n        <div v-if=\"loading.fetch\">\n            <div class=\"loading audio-wave\"></div>\n        </div>\n</template>\n<script>\nimport API from '../../config/api';\nimport actions from '../../vuex/actions';\n\nvar GoodDetail = Vue.extend({\n    name: 'goodList',\n    data() {\n        return {\n            attrlist: [],\n            good: {\n                name: \"\",\n                list: []\n            },\n            loading: {\n                fetch: false,\n                add: false\n            }\n        }\n    },\n    ready() {\n        this.fetch(true);\n        this.fetchAttrList();\n\n        $(this.$el).on('click', '.save', this.addAttr);\n        $('.add-attr').popover({\n            content() {\n                return '<input type=\"text\" placeholder=\"请输入属性名称\" class=\"attrName\"/><button class=\"btn-primary save\">保存</button>'\n            },\n            html: true\n        });\n    },\n    methods: {\n        addAttr() {\n            var self = this;\n            var attr = $(this.$el).find('.attrName').val();\n            if (!attr || !attr.trim()) {\n                return\n            }\n\n            if (self.loading.add) {\n                return\n            }\n\n            self.loading.add = !self.loading.add;\n            $.ajax({\n                url: API.addAttr,\n                type: 'post',\n                data: JSON.stringify({\n                    attr: attr,\n                    goods_id: this.good.id\n                }),\n                success(resp) {\n                    self.alert({\n                        show: true,\n                        msg: '添加成功',\n                        type: 'success'\n                    })\n                    self.attrlist.push({\n                        attr: attr\n                    });\n                    $(self.$el).find('.attrName').val('');\n                    $('.add-attr').popover('hide');\n                },\n                error(resp) {\n                    self.alert({\n                        show: true,\n                        msg: resp.responseText || '添加商品属性失败',\n                        type: 'error'\n                    })\n                }\n            }).always(() => {\n                self.loading.add = !self.loading.add;\n            })\n        },\n        fetch(reset) {\n            var self = this;\n\n            if (self.loading.fetch) {\n                return;\n            }\n            self.loading.fetch = !self.loading.fetch;\n\n            $.ajax({\n                url: API.goodsDetail,\n                data: {\n                    id: this.$route.params.id\n                },\n                success(resp) {\n                    self.good = resp;\n                },\n                error(resp) {\n                    self.alert({\n                        show: true,\n                        msg: '获取商品详情失败',\n                        type: 'error'\n                    })\n                }\n            }).always(() => {\n                self.loading.fetch = !self.loading.fetch;\n            })\n        },\n        fetchAttrList(callback) {\n            var self = this;\n            $.ajax({\n                url: API.goodsAttrs,\n                data: {\n                    good_id: this.$route.params.id\n                },\n                success(rows) {\n                    self.attrlist = rows;\n\n                    if (callback && typeof callback == 'function') {\n                        callback();\n                    }\n                },\n                error() {\n                    self.attrlist = [];\n                }\n            })\n        }\n    },\n    vuex: {\n        actions: {\n            alert: actions.alert\n        }\n    }\n})\nexport default GoodDetail;\n</script>\n\n\n/** WEBPACK FOOTER **\n ** detail.vue?49cd7f08\n **/","module.exports = \"<div class=\\\"panel panel-primary good-detail\\\"> <div class=panel-heading>{{good.name}}</div> <div class=attList> <table class=table> <thead> <tr> <th>属性列表<span class=add-attr data-container=.good-detail data-toggle=popover data-placement=bottom>+</span></th> </tr> </thead> <tbody> <tr> <td> <span v-for=\\\"attr in attrlist\\\" class=attr>{{attr.attr}}</span> </td> </tr> </tbody> </table> </div> <table class=table v-if=!loading.fetch> <thead> <tr> <th>库存列表</th> <th>库存数量</th> <th>操作</th> <th>趋势</th> </tr> </thead> <tbody> <tr class=item> <td>所有</td> <td>{{good.total}}</td> <td> </td> <td> <a href=javascript:void(0) v-link=\\\"{path: '/goods/analysis'}\\\">趋势</a> </td> </tr> <tr class=item v-for=\\\"g in good.list\\\"> <td>{{g.attr | remove-whitespace}}</td> <td>{{g.count}}</td> <td> <a href=javascript:void(0) v-link=\\\"{path: '/goods/in', query: {id: good.id, name: good.name, attr: g.attr} }\\\">入库</a> <a href=javascript:void(0) v-link=\\\"{path: '/goods/out', query: {id: good.id, name: good.name, attr: g.attr} }\\\">出库</a> </td> <td> <a href=javascript:void(0) v-link=\\\"{path: '/goods/analysis'}\\\">趋势</a> </td> </tr> </tbody> </table> <div v-if=loading.fetch> <div class=\\\"loading audio-wave\\\"></div> </div> </div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/ding/Documents/out2man/kil/~/vue-html-loader!/Users/ding/Documents/out2man/kil/~/vue-loader/lib/selector.js?type=template&index=0!./js/features/goods/detail.vue\n ** module id = 93\n ** module chunks = 11\n **/"],"sourceRoot":""}