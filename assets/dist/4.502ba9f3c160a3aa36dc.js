webpackJsonp([4],{"/dMI":function(a,t){a.exports='<nav class=center> <ul class=pagination v-show="totalPage > 1"> <li @click=change(1)> <a href=javascript:void(0) aria-label=Previous> <span aria-hidden=true>&laquo;</span> </a> </li> <li :class="{disabled: pagination.page <= 1}" v-if="pagination.page > 1" @click="change(pagination.page - 1)"> <a href=javascript:void(0) aria-label=Previous> <span aria-hidden=true>&lsaquo;</span> </a> </li> <li v-if="pagination.page > 1" @click=back> <a href=javascript:void(0) aria-label=Previous> <span aria-hidden=true>...</span> </a> </li> <li v-for="i in totalPage" v-if="i >= this.lower && i < this.upper" :class="{active: pagination.page == i + 1}" @click="change(i + 1)"><a href=javascript:void(0)>{{ i + 1 }}</a></li> <li v-if="pagination.page < totalPage" @click=forword> <a href=javascript:void(0) aria-label=Previous> <span aria-hidden=true>...</span> </a> </li> <li v-if="pagination.page < totalPage" @click="change(pagination.page + 1)"> <a href=javascript:void(0) aria-label=Previous> <span aria-hidden=true>&rsaquo;</span> </a> </li> <li :class="{disabled: pagination.page >= totalPage}" @click=change(totalPage)> <a href=javascript:void(0) aria-label=Previous> <span aria-hidden=true>&raquo;</span> </a> </li> <li><span>{{ pagination.page }}/{{ totalPage }} 页</span></li> </ul> </nav> '},Cakq:function(a,t,e){var n,r={};n=e("hcel"),a.exports=n||{},a.exports.__esModule&&(a.exports=a.exports.default);var i="function"==typeof a.exports?a.exports.options||(a.exports.options={}):a.exports;i.computed||(i.computed={}),Object.keys(r).forEach(function(a){var t=r[a];i.computed[a]=function(){return t}})},RSS1:function(a,t,e){"use strict";(function(a,n){Object.defineProperty(t,"__esModule",{value:!0});var r=e("caQ2"),i=e.n(r),s=e("k06x"),o=e("UY0x"),l=e("Cakq"),p=e.n(l),d=e("uDSD"),c=e.n(d),g=a.extend({template:i.a,name:"syncOrder",components:{pagination:p.a},data:function(){return{synclist:[],loading:{fetch:!1},params:{page:1,pageSize:10,count:0},ETL:c.a,show:!1}},ready:function(){this.fetch(!0)},methods:{change:function(a){this.params.page=a,this.fetch()},fetch:function(a){var t=this;a&&(t.params={page:1,pageSize:10,count:0}),t.loading.fetch||(t.loading.fetch=!t.loading.fetch,n.ajax({url:s.a.orderSyncList,data:t.params,success:function(a){t.synclist=a.map(function(a){var t=JSON.parse(a.value);return t.edit=!1,t}),t.params.count=a.count},error:function(a){t.alert({show:!0,msg:"拉取订单列表失败",type:"error"})}}).always(function(){t.loading.fetch=!t.loading.fetch}))},showScript:function(){this.show=!this.show},sync:function(){alert("doSync")}},vuex:{actions:{alert:o.a.alert}}});t.default=g}).call(t,e("I3G/"),e("7t+N"))},aOvi:function(a,t,e){var n,r={};n=e("RSS1"),a.exports=n||{},a.exports.__esModule&&(a.exports=a.exports.default);var i="function"==typeof a.exports?a.exports.options||(a.exports.options={}):a.exports;i.computed||(i.computed={}),Object.keys(r).forEach(function(a){var t=r[a];i.computed[a]=function(){return t}})},caQ2:function(a,t){a.exports='<div class=sync-order> <div class=row> <div class=col-lg-12> <h1 class=page-header>{{ $t(\'text_order_sync\') }}</h1> </div> </div> <div class=row> <div class=col-lg-12> <div class="panel panel-primary good-list"> <div class=panel-heading> <i class="fa fa-bar-chart-o fa-fw"></i> {{ $t(\'text_order_sync\') }} </div> <div class=panel-body> <div class="row btns"> <button type=button class="btn btn-primary float-right" @click=sync>同步</button> <button type=button class="btn btn-primary float-right" @click=showScript>同步脚本</button> </div> <div class="row script" v-if=show> javascript:{{ ETL }} </div> <div class="row script" v-if=show> 请保存书签： 将以上内容复制到网址栏中。 </div> <div class=row> <div class=col-lg-12> <div class=table-responsive> <table class="table table-bordered table-hover table-striped" v-if="!loading.fetch && synclist.length > 0"> <thead> <tr> <th>订单号</th> <th>快递单号</th> <th>收件人</th> <th>价格</th> <th>详细商品</th> <th>发货时间</th> <th>备注</th> <th>操作</th> </tr> </thead> <tbody> <tr class=item v-for="order in synclist"> <td> {{order.orderId}} </td> <td>{{order.expressId}}</td> <td> {{order.name}} </td> <td> {{order.price}} </td> <td> <div v-for="good in order.goods"> <span>{{ good.name }}</span> <span>({{ good.attrs | join-attrs }})</span> <span> * {{ good.amount }}</span> </div> </td> <td> {{order.date}} </td> <td>{{order.comment}}</td> <td> <i class="fa fa-pencil-square-o" aria-hidden=true @click=edit(order) v-if=!order.edit></i> <i class="fa fa-floppy-o" aria-hidden=true v-if=order.edit @click=save(order)></i> </td> </tr> </tbody> </table> <div class=empty v-if="!loading.fetch && synclist.length == 0"> <div class=msg>商品列表为空</div> </div> <div v-if=loading.fetch> <div class="loading audio-wave"></div> </div> <pagination :pagination=params :change=change></pagination> </div> </div> </div> </div> </div> </div> </div> </div> '},hcel:function(a,t,e){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0});var n=e("/dMI"),r=e.n(n),i=a.extend({template:r.a,props:["pagination","change","pageNum"],created:function(){this.pageNum||(this.pageNum=10),this.pageNum=parseInt(this.pageNum)},computed:{pageNumHalf:function(){return Math.ceil(this.pageNum/2)},lower:function a(){var a=this.pagination.page-this.pageNumHalf;return this.pagination.page+this.pageNumHalf-1>this.totalPage&&(a=this.totalPage-this.pageNum),a<0&&(a=0),a},upper:function a(){var t=this.pagination.page-this.pageNumHalf,a=this.pagination.page+this.pageNumHalf-1;return t<0&&(a=this.pageNum),a>this.totalPage&&(a=this.totalPage),a},totalPage:function(){return Math.ceil(this.pagination.count/this.pagination.pageSize)}},methods:{back:function(){if(!(this.pagination.page<=1)){var a=this.pagination.page-this.pageNum<1?1:this.pagination.page-this.pageNum;this.change(a)}},forword:function(){if(!(this.pagination.page>=this.totalPage)){var a=this.pagination.page+this.pageNum>this.totalPage?this.totalPage:this.pagination.page+this.pageNum;this.change(a)}}}});t.default=i}).call(t,e("I3G/"))},uDSD:function(a,t){a.exports="(function() {\r\n    var DICT = {\r\n        '80ml美国外贸药瓶医用密封PP透明塑料瓶便携分装收纳药盒拇指瓶': '拇指瓶',\r\n        '美国美剧安全塑料药瓶防儿童误食pp药盒旅行收纳分装瓶正反两用瓶': '两用瓶',\r\n        '50ml特价创意医用密封透明pet螺旋塑料瓶定制分装瓶保健瓶小药瓶': '螺旋瓶',\r\n        '60ml美国创意医用密封透明定制分装pp塑料瓶旅行收纳小药瓶安全瓶': '安全瓶'\r\n    };\r\n    var orders = document.getElementsByClassName('trade-order-main');\r\n    var results = [];\r\n    for (var i = 0; i < orders.length; i++) {\r\n        var obj = {};\r\n        var order = orders[i];\r\n        var tables = order.getElementsByTagName('table');\r\n        var titleItem = tables[0];\r\n\r\n        var spans = tables[0].getElementsByTagName('td')[0].getElementsByTagName('span');\r\n        var goods = tables[1].getElementsByTagName('tr');\r\n        var outTds = goods[0].getElementsByTagName('td');\r\n        var price = outTds[6].getElementsByClassName('price-mod__price___3Un7c')[0].getElementsByTagName('span')[1];\r\n        var expressPrice = outTds[6].getElementsByTagName('span')[3];\r\n        var buyer = outTds[4].getElementsByClassName('buyer-mod__buyer___3NRwJ')[0].getElementsByTagName('a')[0];\r\n        obj.orderId = spans[2].innerHTML;\r\n        obj.name = buyer.innerHTML;\r\n        obj.date = spans[5].innerHTML;\r\n        obj.goods = [];\r\n        obj.expressPrice = Number(expressPrice.innerHTML.replace(/[^0-9.]/g, ''));\r\n        obj.price = Number(price.innerHTML) - obj.expressPrice;\r\n\r\n        for (var j = 0; j < goods.length; j++) {\r\n            var item = goods[j];\r\n            var ret = [];\r\n            var attrs = item.getElementsByClassName('production-mod__sku-item___3s6lG');\r\n            var tds = item.getElementsByTagName('td');\r\n            var good = tds[0].getElementsByTagName('p')[0].getElementsByTagName('span')[1];\r\n            var amount = tds[2].getElementsByTagName('p')[0];\r\n\r\n            for (var k = 0; k < attrs.length; k++) {\r\n                var attr = attrs[k].getElementsByTagName('span')[2];\r\n                ret.push(attr.innerHTML);\r\n            }\r\n\r\n            var name = DICT[good.innerHTML];\r\n            if (name) {\r\n                obj.goods.push({\r\n                    name: name,\r\n                    amount: amount.innerHTML,\r\n                    attrs: ret\r\n                })\r\n            }\r\n        }\r\n\r\n        if (obj.goods.length > 0) {\r\n            results.push(obj);\r\n        }\r\n    }\r\n\r\n    var form = document.createElement(\"form\");\r\n    document.body.appendChild(form);\r\n    form.method = 'post';\r\n    form.action = 'http://localhost:9000/api/order/sync';\r\n    form.target = '_blank';\r\n    var newElement = document.createElement(\"input\");\r\n    newElement.setAttribute(\"name\", \"orders\");\r\n    newElement.setAttribute(\"type\", \"hidden\");\r\n    newElement.setAttribute(\"value\", escape(JSON.stringify(results)));\r\n    form.appendChild(newElement);\r\n    form.submit();\r\n})()\r\n"}});
//# sourceMappingURL=4.502ba9f3c160a3aa36dc.js.map