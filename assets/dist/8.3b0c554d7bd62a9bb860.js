webpackJsonp([8],{CAu8:function(e,t,r){"use strict";(function(e,d){Object.defineProperty(t,"__esModule",{value:!0});var o=r("qx/e"),i=r.n(o),s=r("k06x"),a=r("U65f"),n=r("UY0x"),c=r("hv7s"),l=(r.n(c),e.extend({template:i.a,name:"createOrder",data:function(){return{model:{orderId:"",receiveName:"",expressId:"",expressCost:"",goodList:[],price:"",comment:""},good:{id:"",name:"",attr:"",amount:""},attrList:[],loading:{create:!1},add:!1}},ready:function(){var e=this;d(this.$el).find("#productName").select2({placeholder:"请输入商品名称（必填）",language:a.a.select2[this.lang],ajax:{url:s.a.searchGood,data:function(e){return{name:e.term,page:e.page}},dataType:"json",delay:700,processResults:function(e,t){var r=[];return e.forEach(function(e){r.push({id:e.id,text:e.name})}),{results:r}}}}).on("select2:select",function(t){var r=t.params.data;r&&(e.good.id=r.id,e.good.name=r.text,e.fetchCombination())}),d(this.$el).find("#productAttr").select2({placeholder:"请选择商品属性",language:a.a.select2[this.lang]}),this.$watch("good.id",this.changeSelect)},watch:{attrList:function(){d(this.$el).find("#productAttr").trigger("change")}},methods:{fetchCombination:function(){var e=this;d.ajax({url:s.a.attrCombination,data:{good_id:this.good.id},success:function(t){e.attrList=t},error:function(){e.attrList=[]}})},remove:function(e){this.model.goodList.splice(e,1)},changeSelect:function(){d(this.$el).find("#productName").trigger("change")},addGood:function(){this.good.attr=d(this.$el).find("#productAttr").val()||[];var e=Object.assign({},this.good);return this.good.id&&this.good.name?this.good.amount?(this.reset(),this.model.goodList.push(e),void(this.add=!this.add)):void this.alert({show:!0,msg:"请输入商品数量",type:"success"}):void this.alert({show:!0,msg:"请输入商品名称",type:"success"})},reset:function(e){var t=e?this.good.id:"",r=e?this.good.name:"";this.good={id:t,name:r,attr:[],amount:""},this.attrList=[],this.$resetValidation()},createOrder:function(){var e=this;e.$validate(!0),e.$v.invalid||e.loading.create||(e.loading.create=!e.loading.create,d.ajax({url:s.a.createOrder,type:"post",data:JSON.stringify(e.model),success:function(t){e.alert({show:!0,msg:"添加成功",type:"success"}),e.resetOrder()},error:function(t){e.alert({show:!0,msg:t.responseText||"添加订单失败",type:"error"})}}).always(function(){e.loading.create=!e.loading.create}))},resetOrder:function(){this.model={orderId:"",receiveName:"",expressId:"",expressCost:"",goodList:[],price:"",comment:""},this.$resetValidation()}},vuex:{getters:{lang:function(e){return e.lang}},actions:{alert:n.a.alert}}}));t.default=l}).call(t,r("I3G/"),r("7t+N"))},HmFQ:function(e,t,r){var d,o={};d=r("CAu8"),e.exports=d||{},e.exports.__esModule&&(e.exports=e.exports.default);var i="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i.computed||(i.computed={}),Object.keys(o).forEach(function(e){var t=o[e];i.computed[e]=function(){return t}})},U65f:function(e,t,r){"use strict";var d={goodsMenu:[{i18nkey:"text_goods_list",path:"/goods/list"},{i18nkey:"text_goods_out",path:"/goods/out"},{i18nkey:"text_goods_in",path:"/goods/in"},{i18nkey:"text_goods_outlist",path:"/goods/outList"},{i18nkey:"text_goods_inlist",path:"/goods/inList"},{i18nkey:"text_goods_create",path:"/goods/create"}],orderMenu:[{i18nkey:"text_order_list",path:"/order/list"},{i18nkey:"text_order_create",path:"/order/create"},{i18nkey:"text_order_sync",path:"/order/sync"}],select2:{zh:{errorLoading:function(){return"无法载入结果。"},inputTooLong:function(e){return"请删除"+(e.input.length-e.maximum)+"个字符"},inputTooShort:function(e){return"请再输入至少"+(e.minimum-e.input.length)+"个字符"},loadingMore:function(){return"载入更多结果…"},maximumSelected:function(e){return"最多只能选择"+e.maximum+"个项目"},noResults:function(){return"未找到结果"},searching:function(){return"搜索中…"}}}};t.a=d},"qx/e":function(e,t){e.exports='<div> <div class=row> <div class=col-lg-12> <h1 class=page-header>{{ $t(\'text_order_create\') }}</h1> </div> </div> <div class=row> <div class=col-lg-12> <div class="panel panel-primary create-order"> <div class=panel-heading> <i class="fa fa-bar-chart-o fa-fw"></i> {{ $t(\'text_order_create\') }} </div> <div class=panel-body> <validator name=v> <div class=input-group> <span class=input-group-addon>订单号：</span> <input id=orderId type=text class=form-control placeholder=请输入订单号 aria-describedby=orderId v-model=model.orderId v-validate:order-id="{required:true, posInt: true}" :class="{\'red-border\': $v.orderId && $v.orderId.touched && $v.orderId.invalid}"> </div> <div class="input-group error-msg" v-if="$v.orderId.touched && $v.orderId.invalid"> <div v-if=$v.orderId.required class=red-color>订单号不能为空</div> <div v-if="!$v.orderId.required && $v.orderId.posInt" class=red-color>订单号只能为正整数</div> </div> <div class=input-group> <span class=input-group-addon>收货人：</span> <input id=receiveName type=text class=form-control placeholder=请输入收货人 aria-describedby=receiveName v-model=model.receiveName v-validate:receive-name={required:true} :class="{\'red-border\': $v.receiveName && $v.receiveName.touched && $v.receiveName.invalid}"> </div> <div class="input-group error-msg" v-if="$v.receiveName.touched && $v.receiveName.invalid"> <div v-if=$v.receiveName.required class=red-color>收货人不能为空</div> </div> <div class=input-group> <span class=input-group-addon>订单价格</span> <input id=price type=text class=form-control placeholder=请输入订单价格 aria-describedby=price v-model=model.price v-validate:price="{required:true, posFloat: true}" :class="{\'red-border\': $v.price && $v.price.touched && $v.price.invalid}"> </div> <div class="input-group error-msg" v-if="$v.price.touched && $v.price.invalid"> <div v-if=$v.price.required class=red-color>订单价格不能为空</div> <div v-if="!$v.price.required && $v.price.posFloat" class=red-color>订单价格不能小于零</div> </div> <div class=input-group> <span class=input-group-addon>快递单号</span> <input id=expressId type=text class=form-control placeholder=请输入快递单号 aria-describedby=expressId v-model=model.expressId v-validate:express-id="{required:true, posInt: true}" :class="{\'red-border\': $v.expressId && $v.expressId.touched && $v.expressId.invalid}"> </div> <div class="input-group error-msg" v-if="$v.expressId.touched && $v.expressId.invalid"> <div v-if=$v.expressId.required class=red-color>快递单号不能为空</div> <div v-if="!$v.expressId.required && $v.expressId.posInt" class=red-color>快递单号只能为正整数</div> </div> <div class=input-group> <span class=input-group-addon>快递费用</span> <input id=expressCost type=text class=form-control placeholder=请输入快递费 aria-describedby=expressCost v-model=model.expressCost v-validate:express-cost="{required:true, posInt: true}" :class="{\'red-border\': $v.expressCost && $v.expressCost.touched && $v.expressCost.invalid}"> </div> <div class="input-group error-msg" v-if="$v.expressCost.touched && $v.expressCost.invalid"> <div v-if=$v.expressCost.required class=red-color>快递费不能为空</div> <div v-if="!$v.expressCost.required && $v.expressCost.posInt" class=red-color>快递费只能为正整数</div> </div> <div class=input-group> <span class=input-group-addon>备注说明</span> <textarea id=comment type=text class=form-control placeholder="" aria-describedby=comment v-model=model.comment></textarea> </div> <div class=good-list v-if="model.goodList.length > 0"> <table class=table> <thead> <tr> <th>商品名称</th> <th>商品属性</th> <th>商品数量</th> <th>操作</th> </tr> </thead> <tbody> <tr class=item v-for="good in model.goodList"> <td>{{good.name}}</td> <td>{{good.attr}}</td> <td> {{good.amount}} </td> <td><i class="fa fa-trash" aria-hidden=true @click=remove($index)></i> </td> </tr> </tbody> </table> </div> <div class=right v-show=!add><a href=javascript:void(0) @click="add=!add">+添加商品</a></div> <div v-show=add class=addArea> <div class=input-group> <span class=input-group-addon>商品名称</span> <div class=select2Div> <select id=productName style=width:100% v-model=good.id> </select> </div> </div> <div class=input-group> <span class=input-group-addon>商品属性</span> <div class=select2Div> <select id=productAttr style=width:100%> <option v-for="attr in attrList" :value="attr.attrs | join-attrs \'id\' \',\'">{{attr.attrs | join-attrs}}</option> </select> </div> </div> <div class=input-group> <span class=input-group-addon>商品数量</span> <input id=productAmount type=text class=form-control placeholder=请输入商品数量 aria-describedby=productAmount v-model=good.amount> </div> <div class="float-right btns"> <button type=button class="btn btn-primary" @click=addGood>保存</button> <button type=button class="btn btn-danger" @click="add = !add">完成</button> </div> <div class=clearfix></div> </div> </validator> <div class="float-right btns"> <button type=button class="btn btn-primary" @click=createOrder>创建</button> <button type=button class="btn btn-danger" @click=reset>取消</button> </div> </div> </div> </div> </div> </div> '}});
//# sourceMappingURL=8.3b0c554d7bd62a9bb860.js.map