{"version":3,"sources":["webpack:///7.caed2efb93525539f78a.js","webpack:///./js/config/dict.js?53ae*","webpack:///./js/features/goods/in.vue","webpack:///in.vue","webpack:///./js/features/goods/in.vue?5ea4"],"names":["webpackJsonp",59,"module","exports","Object","defineProperty","value","dict","goodsMenu","select2","zh","errorLoading","inputTooLong","args","overChars","input","length","maximum","message","inputTooShort","remainingChars","minimum","loadingMore","maximumSelected","noResults","searching",79,"__webpack_require__","__vue_script__","__vue_template__","__esModule","options","template",80,"Vue","$","_interopRequireDefault","obj","default","_stringify","_stringify2","_api","_api2","_dict","_dict2","_actions","_actions2","GoodIn","extend","name","data","model","id","attr","amount","priceIn","attrList","loading","in","ready","self","this","$el","find","placeholder","language","lang","minimumInputLength","ajax","url","searchGood","params","term","page","dataType","delay","processResults","resp","ret","forEach","r","push","text","results","on","event","fetchAttrs","multiple","$watch","changeSelect","init","watch","trigger","methods","$route","query","decodeURIComponent","append","split","nextTick","val","callback","goodsAttrs","good_id","success","rows","error","goodsIn","$validate","$v","invalid","type","alert","show","msg","reset","responseText","always","$resetValidation","vuex","getters","state","actions","call",81],"mappings":"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","file":"7.caed2efb93525539f78a.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 59:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar dict = {\n\t    goodsMenu: ['text_goods_state', 'text_goods_list', 'text_goods_out', 'text_goods_in', 'text_goods_outlist', 'text_goods_inlist', 'text_goods_create'],\n\t    select2: {\n\t        \"zh\": {\n\t            errorLoading: function errorLoading() {\n\t                return '无法载入结果。';\n\t            },\n\t            inputTooLong: function inputTooLong(args) {\n\t                var overChars = args.input.length - args.maximum;\n\t\n\t                var message = '请删除' + overChars + '个字符';\n\t\n\t                return message;\n\t            },\n\t            inputTooShort: function inputTooShort(args) {\n\t                var remainingChars = args.minimum - args.input.length;\n\t\n\t                var message = '请再输入至少' + remainingChars + '个字符';\n\t\n\t                return message;\n\t            },\n\t            loadingMore: function loadingMore() {\n\t                return '载入更多结果…';\n\t            },\n\t            maximumSelected: function maximumSelected(args) {\n\t                var message = '最多只能选择' + args.maximum + '个项目';\n\t\n\t                return message;\n\t            },\n\t            noResults: function noResults() {\n\t                return '未找到结果';\n\t            },\n\t            searching: function searching() {\n\t                return '搜索中…';\n\t            }\n\t        }\n\t    }\n\t};\n\t\n\texports.default = dict;\n\n/***/ },\n\n/***/ 79:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__vue_script__ = __webpack_require__(80)\n\t__vue_template__ = __webpack_require__(81)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n\n/***/ 80:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Vue, $) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _stringify = __webpack_require__(72);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _api = __webpack_require__(55);\n\t\n\tvar _api2 = _interopRequireDefault(_api);\n\t\n\tvar _dict = __webpack_require__(59);\n\t\n\tvar _dict2 = _interopRequireDefault(_dict);\n\t\n\tvar _actions = __webpack_require__(52);\n\t\n\tvar _actions2 = _interopRequireDefault(_actions);\n\t\n\t__webpack_require__(15);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// <template>\n\t//     <div class=\"panel panel-primary good-in\">\n\t//         <div class=\"panel-heading\">商品入库</div>\n\t//         <div class=\"panel-body\">\n\t//             <validator name=\"v\">\n\t//                 <div class=\"input-group\">\n\t//                     <span class=\"input-group-addon\">商品名称</span>\n\t//                     <div class=\"select2Div\">\n\t//                         <select id=\"productName\" style=\"width: 100%\" v-model=\"model.id\" v-validate:name=\"{required:true}\">\n\t//                         </select>\n\t//                     </div>\n\t//                 </div>\n\t//                 <div class=\"input-group error-msg\" v-if=\"$v.name.touched && $v.name.invalid\">\n\t//                     <div v-if=\"$v.name.required\" class=\"red-color\">商品名称不能为空</div>\n\t//                 </div>\n\t//                 <div class=\"input-group\">\n\t//                     <span class=\"input-group-addon\">商品属性</span>\n\t//                     <div class=\"select2Div\">\n\t//                         <select id=\"productAttr\" style=\"width: 100%\">\n\t//                             <option v-for=\"attr in attrList\" :value=\"attr.attr\">{{attr.attr}}</option>\n\t//                         </select>\n\t//                     </div>\n\t//                 </div>\n\t//                 <div class=\"input-group\">\n\t//                     <span class=\"input-group-addon\">入库数量</span>\n\t//                     <input id=\"productAmount\" type=\"text\" class=\"form-control\" placeholder=\"请输入入库数量\" aria-describedby=\"productAmount\" v-model=\"model.amount\" v-validate:amount=\"{required:true, posInt: true}\" :class=\"{'red-border': $v.amount && $v.amount.touched && $v.amount.invalid}\" number>\n\t//                 </div>\n\t//                 <div class=\"input-group error-msg\" v-if=\"$v.amount.touched && $v.amount.invalid\">\n\t//                     <div v-if=\"$v.amount.required\" class=\"red-color\">入库数量不能为空</div>\n\t//                     <div v-if=\"!$v.amount.required && $v.amount.posInt\" class=\"red-color\">入库数量只能为正整数</div>\n\t//                 </div>\n\t//                 <div class=\"input-group\">\n\t//                     <span class=\"input-group-addon\" id=\"productAmount\">商品进价</span>\n\t//                     <input type=\"text\" class=\"form-control\" placeholder=\"请输入商品进价\" aria-describedby=\"productPriceIn\" v-model=\"model.priceIn\" v-validate:price=\"{required:true, number: true}\" :class=\"{'red-border': $v.price && $v.price.touched && $v.price.invalid}\">\n\t//                 </div>\n\t//                 <div class=\"input-group error-msg\" v-if=\"$v.price.touched && $v.price.invalid\">\n\t//                     <div v-if=\"$v.price.required\" class=\"red-color\">商品进价不能为空</div>\n\t//                     <div v-if=\"!$v.price.required && $v.price.number\" class=\"red-color\">商品进价只能为数字</div>\n\t//                 </div>\n\t//                 <div class=\"float-right btns\">\n\t//                     <button type=\"button\" class=\"btn btn-primary\" @click=\"goodsIn\">入库</button>\n\t//                     <button type=\"button\" class=\"btn btn-danger\" @click=\"reset\">取消</button>\n\t//                 </div>\n\t//             </validator>\n\t//         </div>\n\t//     </div>\n\t// </template>\n\t// <script>\n\t\n\t\n\tvar GoodIn = Vue.extend({\n\t    name: 'in',\n\t    data: function data() {\n\t        return {\n\t            model: {\n\t                id: \"\",\n\t                name: \"\",\n\t                attr: [],\n\t                amount: 0,\n\t                priceIn: \"\"\n\t            },\n\t            attrList: [],\n\t            loading: { in: false\n\t            }\n\t        };\n\t    },\n\t    ready: function ready() {\n\t        var self = this;\n\t        $(this.$el).find('#productName').select2({\n\t            placeholder: \"请输入商品名称（必填）\",\n\t            language: _dict2.default.select2[this.lang],\n\t            minimumInputLength: 1,\n\t            ajax: {\n\t                url: _api2.default.searchGood,\n\t                data: function data(params) {\n\t                    return {\n\t                        name: params.term,\n\t                        page: params.page\n\t                    };\n\t                },\n\t\n\t                dataType: 'json',\n\t                delay: 700,\n\t                processResults: function processResults(resp, params) {\n\t                    var ret = [];\n\t                    resp.forEach(function (r) {\n\t                        ret.push({\n\t                            id: r.id,\n\t                            text: r.name\n\t                        });\n\t                    });\n\t\n\t                    return {\n\t                        results: ret\n\t                    };\n\t                }\n\t            }\n\t        }).on('select2:select', function (event) {\n\t            var data = event.params.data;\n\t            if (data) {\n\t                self.model.id = data.id;\n\t                self.model.name = data.text;\n\t                self.fetchAttrs();\n\t            }\n\t        });\n\t        $(this.$el).find('#productAttr').select2({\n\t            multiple: true,\n\t            placeholder: \"请选择商品属性\",\n\t            language: _dict2.default.select2[this.lang]\n\t        });\n\t\n\t        this.$watch('model.id', this.changeSelect);\n\t        this.init();\n\t    },\n\t\n\t    watch: {\n\t        attrList: function attrList() {\n\t            $(this.$el).find('#productAttr').trigger('change');\n\t        }\n\t    },\n\t    methods: {\n\t        init: function init() {\n\t            var self = this;\n\t            var id = self.$route.query.id;\n\t            var name = self.$route.query.name;\n\t\n\t            if (id && name) {\n\t                self.model.id = id;\n\t                self.model.name = decodeURIComponent(name);\n\t                $(self.$el).find('#productName').append('<option value=\"' + self.model.id + '\">' + self.model.name + '</option>');\n\t                self.fetchAttrs(function () {\n\t                    var attr = self.$route.query.attr;\n\t                    attr = decodeURIComponent(attr).split(',');\n\t                    if (attr) {\n\t                        Vue.nextTick(function () {\n\t                            self.model.attr = attr;\n\t                            $(\"#productAttr\").val(attr).trigger('change');\n\t                        });\n\t                    }\n\t                });\n\t            }\n\t        },\n\t        changeSelect: function changeSelect() {\n\t            $(this.$el).find('#productName').trigger('change');\n\t        },\n\t        fetchAttrs: function fetchAttrs(callback) {\n\t            var self = this;\n\t            $.ajax({\n\t                url: _api2.default.goodsAttrs,\n\t                data: {\n\t                    good_id: this.model.id\n\t                },\n\t                success: function success(rows) {\n\t                    self.attrList = rows;\n\t\n\t                    if (callback && typeof callback == 'function') {\n\t                        callback();\n\t                    }\n\t                },\n\t                error: function error() {\n\t                    self.attrList = [];\n\t                }\n\t            });\n\t        },\n\t        goodsIn: function goodsIn() {\n\t            var self = this;\n\t            self.$validate(true);\n\t            if (self.$v.invalid) {\n\t                return;\n\t            }\n\t            if (self.loading.in) {\n\t                return;\n\t            }\n\t            self.loading.in = !self.loading.in;\n\t\n\t            self.model.attr = $(self.$el).find('#productAttr').val();\n\t            $.ajax({\n\t                url: _api2.default.goodsIn,\n\t                type: 'post',\n\t                data: (0, _stringify2.default)(self.model),\n\t                success: function success(resp) {\n\t                    self.alert({\n\t                        show: true,\n\t                        msg: '入库成功',\n\t                        type: 'success'\n\t                    });\n\t                    self.reset();\n\t                },\n\t                error: function error(resp) {\n\t                    self.alert({\n\t                        show: true,\n\t                        msg: resp.responseText || '入库失败',\n\t                        type: 'error'\n\t                    });\n\t                }\n\t            }).always(function () {\n\t                self.loading.in = !self.loading.in;\n\t            });\n\t        },\n\t        reset: function reset() {\n\t            this.model = {\n\t                id: \"\",\n\t                name: \"\",\n\t                attr: [],\n\t                amount: 0,\n\t                priceIn: \"\"\n\t            };\n\t            this.attrList = [];\n\t            this.$resetValidation();\n\t        }\n\t    },\n\t    vuex: {\n\t        getters: {\n\t            lang: function lang(state) {\n\t                return state.lang;\n\t            }\n\t        },\n\t        actions: {\n\t            alert: _actions2.default.alert\n\t        }\n\t    }\n\t});\n\texports.default = GoodIn;\n\t// </script>\n\t/* generated by vue-loader */\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9), __webpack_require__(8)))\n\n/***/ },\n\n/***/ 81:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"panel panel-primary good-in\\\"> <div class=panel-heading>商品入库</div> <div class=panel-body> <validator name=v> <div class=input-group> <span class=input-group-addon>商品名称</span> <div class=select2Div> <select id=productName style=\\\"width: 100%\\\" v-model=model.id v-validate:name={required:true}> </select> </div> </div> <div class=\\\"input-group error-msg\\\" v-if=\\\"$v.name.touched && $v.name.invalid\\\"> <div v-if=$v.name.required class=red-color>商品名称不能为空</div> </div> <div class=input-group> <span class=input-group-addon>商品属性</span> <div class=select2Div> <select id=productAttr style=\\\"width: 100%\\\"> <option v-for=\\\"attr in attrList\\\" :value=attr.attr>{{attr.attr}}</option> </select> </div> </div> <div class=input-group> <span class=input-group-addon>入库数量</span> <input id=productAmount type=text class=form-control placeholder=请输入入库数量 aria-describedby=productAmount v-model=model.amount v-validate:amount=\\\"{required:true, posInt: true}\\\" :class=\\\"{'red-border': $v.amount && $v.amount.touched && $v.amount.invalid}\\\" number> </div> <div class=\\\"input-group error-msg\\\" v-if=\\\"$v.amount.touched && $v.amount.invalid\\\"> <div v-if=$v.amount.required class=red-color>入库数量不能为空</div> <div v-if=\\\"!$v.amount.required && $v.amount.posInt\\\" class=red-color>入库数量只能为正整数</div> </div> <div class=input-group> <span class=input-group-addon id=productAmount>商品进价</span> <input type=text class=form-control placeholder=请输入商品进价 aria-describedby=productPriceIn v-model=model.priceIn v-validate:price=\\\"{required:true, number: true}\\\" :class=\\\"{'red-border': $v.price && $v.price.touched && $v.price.invalid}\\\"> </div> <div class=\\\"input-group error-msg\\\" v-if=\\\"$v.price.touched && $v.price.invalid\\\"> <div v-if=$v.price.required class=red-color>商品进价不能为空</div> <div v-if=\\\"!$v.price.required && $v.price.number\\\" class=red-color>商品进价只能为数字</div> </div> <div class=\\\"float-right btns\\\"> <button type=button class=\\\"btn btn-primary\\\" @click=goodsIn>入库</button> <button type=button class=\\\"btn btn-danger\\\" @click=reset>取消</button> </div> </validator> </div> </div>\";\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 7.caed2efb93525539f78a.js\n **/","const dict = {\n    goodsMenu: ['text_goods_state', 'text_goods_list', 'text_goods_out', 'text_goods_in', 'text_goods_outlist', 'text_goods_inlist', 'text_goods_create'],\n    select2: {\n        \"zh\": {\n            errorLoading: function() {\n                return '无法载入结果。';\n            },\n            inputTooLong: function(args) {\n                var overChars = args.input.length - args.maximum;\n\n                var message = '请删除' + overChars + '个字符';\n\n                return message;\n            },\n            inputTooShort: function(args) {\n                var remainingChars = args.minimum - args.input.length;\n\n                var message = '请再输入至少' + remainingChars + '个字符';\n\n                return message;\n            },\n            loadingMore: function() {\n                return '载入更多结果…';\n            },\n            maximumSelected: function(args) {\n                var message = '最多只能选择' + args.maximum + '个项目';\n\n                return message;\n            },\n            noResults: function() {\n                return '未找到结果';\n            },\n            searching: function() {\n                return '搜索中…';\n            }\n        }\n    }\n}\n\nexport default dict;\n\n\n/** WEBPACK FOOTER **\n ** ./js/config/dict.js\n **/","var __vue_script__, __vue_template__\n__vue_script__ = require(\"!!babel?{\\\"presets\\\":[\\\"/Users/ding/Documents/out2man/kil/node_modules/babel-preset-es2015/index.js\\\"],\\\"plugins\\\":[[\\\"/Users/ding/Documents/out2man/kil/node_modules/babel-plugin-transform-runtime/lib/index.js\\\"]],\\\"cacheDirectory\\\":true}!./../../../../../kil/node_modules/vue-loader/lib/selector.js?type=script&index=0!./in.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../../../../kil/node_modules/vue-loader/lib/selector.js?type=template&index=0!./in.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/features/goods/in.vue\n ** module id = 79\n ** module chunks = 7\n **/","<template>\n    <div class=\"panel panel-primary good-in\">\n        <div class=\"panel-heading\">商品入库</div>\n        <div class=\"panel-body\">\n            <validator name=\"v\">\n                <div class=\"input-group\">\n                    <span class=\"input-group-addon\">商品名称</span>\n                    <div class=\"select2Div\">\n                        <select id=\"productName\" style=\"width: 100%\" v-model=\"model.id\" v-validate:name=\"{required:true}\">\n                        </select>\n                    </div>\n                </div>\n                <div class=\"input-group error-msg\" v-if=\"$v.name.touched && $v.name.invalid\">\n                    <div v-if=\"$v.name.required\" class=\"red-color\">商品名称不能为空</div>\n                </div>\n                <div class=\"input-group\">\n                    <span class=\"input-group-addon\">商品属性</span>\n                    <div class=\"select2Div\">\n                        <select id=\"productAttr\" style=\"width: 100%\">\n                            <option v-for=\"attr in attrList\" :value=\"attr.attr\">{{attr.attr}}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class=\"input-group\">\n                    <span class=\"input-group-addon\">入库数量</span>\n                    <input id=\"productAmount\" type=\"text\" class=\"form-control\" placeholder=\"请输入入库数量\" aria-describedby=\"productAmount\" v-model=\"model.amount\" v-validate:amount=\"{required:true, posInt: true}\" :class=\"{'red-border': $v.amount && $v.amount.touched && $v.amount.invalid}\" number>\n                </div>\n                <div class=\"input-group error-msg\" v-if=\"$v.amount.touched && $v.amount.invalid\">\n                    <div v-if=\"$v.amount.required\" class=\"red-color\">入库数量不能为空</div>\n                    <div v-if=\"!$v.amount.required && $v.amount.posInt\" class=\"red-color\">入库数量只能为正整数</div>\n                </div>\n                <div class=\"input-group\">\n                    <span class=\"input-group-addon\" id=\"productAmount\">商品进价</span>\n                    <input type=\"text\" class=\"form-control\" placeholder=\"请输入商品进价\" aria-describedby=\"productPriceIn\" v-model=\"model.priceIn\" v-validate:price=\"{required:true, number: true}\" :class=\"{'red-border': $v.price && $v.price.touched && $v.price.invalid}\">\n                </div>\n                <div class=\"input-group error-msg\" v-if=\"$v.price.touched && $v.price.invalid\">\n                    <div v-if=\"$v.price.required\" class=\"red-color\">商品进价不能为空</div>\n                    <div v-if=\"!$v.price.required && $v.price.number\" class=\"red-color\">商品进价只能为数字</div>\n                </div>\n                <div class=\"float-right btns\">\n                    <button type=\"button\" class=\"btn btn-primary\" @click=\"goodsIn\">入库</button>\n                    <button type=\"button\" class=\"btn btn-danger\" @click=\"reset\">取消</button>\n                </div>\n            </validator>\n        </div>\n    </div>\n</template>\n<script>\nimport API from '../../config/api';\nimport DICT from '../../config/dict';\nimport actions from '../../vuex/actions';\nimport 'select2';\n\nvar GoodIn = Vue.extend({\n    name: 'in',\n    data() {\n        return {\n            model: {\n                id: \"\",\n                name: \"\",\n                attr: [],\n                amount: 0,\n                priceIn: \"\"\n            },\n            attrList: [],\n            loading: { in : false\n            }\n        }\n    },\n    ready() {\n        var self = this;\n        $(this.$el).find('#productName').select2({\n            placeholder: \"请输入商品名称（必填）\",\n            language: DICT.select2[this.lang],\n            minimumInputLength: 1,\n            ajax: {\n                url: API.searchGood,\n                data(params) {\n                    return {\n                        name: params.term,\n                        page: params.page\n                    };\n                },\n                dataType: 'json',\n                delay: 700,\n                processResults: function(resp, params) {\n                    var ret = [];\n                    resp.forEach((r) => {\n                        ret.push({\n                            id: r.id,\n                            text: r.name\n                        })\n                    })\n\n                    return {\n                        results: ret\n                    };\n                }\n            }\n        }).on('select2:select', (event) => {\n            var data = event.params.data;\n            if (data) {\n                self.model.id = data.id;\n                self.model.name = data.text;\n                self.fetchAttrs();\n            }\n        })\n        $(this.$el).find('#productAttr').select2({\n            multiple: true,\n            placeholder: \"请选择商品属性\",\n            language: DICT.select2[this.lang]\n        })\n\n        this.$watch('model.id', this.changeSelect);\n        this.init();\n    },\n    watch: {\n        attrList() {\n            $(this.$el).find('#productAttr').trigger('change');\n        }\n    },\n    methods: {\n        init() {\n            var self = this;\n            var id = self.$route.query.id;\n            var name = self.$route.query.name;\n\n            if (id && name) {\n                self.model.id = id;\n                self.model.name = decodeURIComponent(name);\n                $(self.$el).find('#productName').append('<option value=\"' + self.model.id + '\">' + self.model.name + '</option>');\n                self.fetchAttrs(() => {\n                    var attr = self.$route.query.attr;\n                    attr = decodeURIComponent(attr).split(',');\n                    if (attr) {\n                        Vue.nextTick(() => {\n                            self.model.attr = attr;\n                            $(\"#productAttr\").val(attr).trigger('change');\n                        })\n                    }\n                });\n            }\n        },\n        changeSelect() {\n            $(this.$el).find('#productName').trigger('change');\n        },\n        fetchAttrs(callback) {\n            var self = this;\n            $.ajax({\n                url: API.goodsAttrs,\n                data: {\n                    good_id: this.model.id\n                },\n                success(rows) {\n                    self.attrList = rows;\n\n                    if (callback && typeof callback == 'function') {\n                        callback();\n                    }\n                },\n                error() {\n                    self.attrList = [];\n                }\n            })\n        },\n        goodsIn() {\n            var self = this;\n            self.$validate(true);\n            if (self.$v.invalid) {\n                return;\n            }\n            if (self.loading.in) {\n                return;\n            }\n            self.loading.in = !self.loading.in;\n\n            self.model.attr = $(self.$el).find('#productAttr').val();\n            $.ajax({\n                url: API.goodsIn,\n                type: 'post',\n                data: JSON.stringify(self.model),\n                success(resp) {\n                    self.alert({\n                        show: true,\n                        msg: '入库成功',\n                        type: 'success'\n                    });\n                    self.reset();\n                },\n                error(resp) {\n                    self.alert({\n                        show: true,\n                        msg: resp.responseText || '入库失败',\n                        type: 'error'\n                    })\n                }\n            }).always(() => {\n                self.loading.in = !self.loading.in;\n            })\n        },\n        reset() {\n            this.model = {\n                id: \"\",\n                name: \"\",\n                attr: [],\n                amount: 0,\n                priceIn: \"\"\n            };\n            this.attrList = [];\n            this.$resetValidation();\n        }\n    },\n    vuex: {\n        getters: {\n            lang: state => state.lang\n        },\n        actions: {\n            alert: actions.alert\n        }\n    }\n})\nexport default GoodIn;\n</script>\n\n\n/** WEBPACK FOOTER **\n ** in.vue?63702168\n **/","module.exports = \"<div class=\\\"panel panel-primary good-in\\\"> <div class=panel-heading>商品入库</div> <div class=panel-body> <validator name=v> <div class=input-group> <span class=input-group-addon>商品名称</span> <div class=select2Div> <select id=productName style=\\\"width: 100%\\\" v-model=model.id v-validate:name={required:true}> </select> </div> </div> <div class=\\\"input-group error-msg\\\" v-if=\\\"$v.name.touched && $v.name.invalid\\\"> <div v-if=$v.name.required class=red-color>商品名称不能为空</div> </div> <div class=input-group> <span class=input-group-addon>商品属性</span> <div class=select2Div> <select id=productAttr style=\\\"width: 100%\\\"> <option v-for=\\\"attr in attrList\\\" :value=attr.attr>{{attr.attr}}</option> </select> </div> </div> <div class=input-group> <span class=input-group-addon>入库数量</span> <input id=productAmount type=text class=form-control placeholder=请输入入库数量 aria-describedby=productAmount v-model=model.amount v-validate:amount=\\\"{required:true, posInt: true}\\\" :class=\\\"{'red-border': $v.amount && $v.amount.touched && $v.amount.invalid}\\\" number> </div> <div class=\\\"input-group error-msg\\\" v-if=\\\"$v.amount.touched && $v.amount.invalid\\\"> <div v-if=$v.amount.required class=red-color>入库数量不能为空</div> <div v-if=\\\"!$v.amount.required && $v.amount.posInt\\\" class=red-color>入库数量只能为正整数</div> </div> <div class=input-group> <span class=input-group-addon id=productAmount>商品进价</span> <input type=text class=form-control placeholder=请输入商品进价 aria-describedby=productPriceIn v-model=model.priceIn v-validate:price=\\\"{required:true, number: true}\\\" :class=\\\"{'red-border': $v.price && $v.price.touched && $v.price.invalid}\\\"> </div> <div class=\\\"input-group error-msg\\\" v-if=\\\"$v.price.touched && $v.price.invalid\\\"> <div v-if=$v.price.required class=red-color>商品进价不能为空</div> <div v-if=\\\"!$v.price.required && $v.price.number\\\" class=red-color>商品进价只能为数字</div> </div> <div class=\\\"float-right btns\\\"> <button type=button class=\\\"btn btn-primary\\\" @click=goodsIn>入库</button> <button type=button class=\\\"btn btn-danger\\\" @click=reset>取消</button> </div> </validator> </div> </div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/ding/Documents/out2man/kil/~/vue-html-loader!/Users/ding/Documents/out2man/kil/~/vue-loader/lib/selector.js?type=template&index=0!./js/features/goods/in.vue\n ** module id = 81\n ** module chunks = 7\n **/"],"sourceRoot":""}